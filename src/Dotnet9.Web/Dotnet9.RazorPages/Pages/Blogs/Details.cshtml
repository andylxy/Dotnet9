@page "/{Year}/{Month}/{Slug}"
@inject ISystemService SystemService
@model Dotnet9.RazorPages.Pages.Blogs.DetailsModel
@{
    var siteInfo = await SystemService.GetSiteInfoAsync();
    ViewData[ViewDataKeys.Title] = $"文章-{Model.Blog?.Title}";
    ViewData[ViewDataKeys.Keywords] = Model.Slug;
    ViewData[ViewDataKeys.Description] = Model.Blog?.Description;
}

@section Headers
{
    <link rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/11.7.0/styles/monokai-sublime.min.css"/>
    <link rel="stylesheet" href="~/css/detail.css"/>
}

<h1 class="detail-title">@Model.Blog?.Title</h1>

<div class="detail-action">
    @if (Model.Blog?.Banner == true)
    {
        <span class="ps_tj">推荐</span>
    }
    @if (Model.Blog?.CopyrightType == "Default")
    {
        <span class="ps_yc">原创</span>
    }

    <span>
        <i class="iconfont icon-yonghu"></i>
        &nbsp; @(Model.Blog?.Original ?? siteInfo?.Owner)
    </span>


    @if (Model.Blog?.Albums != null && Model.Blog?.Albums.Any() == true)
    {
        <span>
            <i class="iconfont icon-wenjianjia"></i>
            @foreach (var album in Model.Blog!.Albums)
            {
                <a href="/albums/@album.Slug">@album.Name</a>
            }
        </span>
    }

    @if (Model.Blog?.Categories != null && Model.Blog?.Categories.Any() == true)
    {
        <span>
            <i class="iconfont icon-wenjianjia"></i>
            @foreach (var cat in Model.Blog!.Categories)
            {
                <a href="/categories/@cat.Slug">@cat.Name</a>
            }
        </span>
    }


    @if (Model.Blog?.Tags != null && Model.Blog?.Tags.Any() == true)
    {
        <span>
            <i class="iconfont icon-wenjianjia"></i>
            @foreach (var tag in Model.Blog!.Tags)
            {
                <a href="/tags/@tag.Name">@tag.Name</a>
            }
        </span>
    }

    <span>
        <i class="iconfont icon-riqi"></i>
        &nbsp;@Model.Blog?.CreationTime.ToString("yyyy-MM-dd")
    </span>
    <span>
        <i class="iconfont icon-yanjing"></i>
        &nbsp;@Model.Blog?.ViewCount
    </span>
</div>

<div id="view-content" class="gap-solid"></div>

<div class="details-content">
    @Html.Raw(Model.BlogContentHtml)
</div>

<div class="share" id="down">
    <img src="https://img1.dotnet9.com/site/wechatpublic.jpg" alt="">
    <div class="share-text">
        <p>扫码关注Dotnet9微信公众号，第一时间获取网站更新动态</p>
        @if (Model.Blog != null)
        {
            @switch (Model.Blog.CopyrightType)
            {
                case "Reprint":
                    <p>本文来自转载，如若二次转载请联系原作者。</p>
                    break;
                case "Contribution":
                    <p>本文来自网友投稿，如若转载请联系原作者。</p>
                    break;
                default:
                    <p>本文由本站(<a href="https://dotnet9.com">https://dotnet9.com</a>)整理或创作，如若转载请保留原文标题及原文链接</p>
                    break;
            }
            <p>原文作者：<a style="color: #262626;" href="#">@(Model.Blog.Original ?? @siteInfo?.Owner)</a></p>
            @if (Model.Blog.CopyrightType == "Default")
            {
                <p>原文标题：<a href="/@Model.Blog.CreationTime.ToString("yyyy/MM")/@Model.Blog.Slug">@Model.Blog.Title</a></p>
                <p>原文链接：<a href="/@Model.Blog.CreationTime.ToString("yyyy/MM")/@Model.Blog.Slug">https://dotnet9.com/@($"{Model.Blog.CreationTime:yyyy/MM}/{Model.Blog.Slug}")</a></p>
            }
            else
            {
                <p>原文标题：<a href="@Model.Blog.OriginalLink">@(Model.Blog.OriginalTitle ?? Model.Blog.Title)</a></p>
                <p>原文链接：<a href="@Model.Blog.OriginalLink">@Model.Blog.OriginalLink</a></p>
            }
        }
    </div>
</div>

@section Scripts
{
    <script src="https://cdn.staticfile.org/highlight.js/11.7.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
}