@using Dotnet9.Web.Utils
@using Dotnet9.Domain.Shared.Blogs
@model Dotnet9.Application.Contracts.Blogs.BlogPostViewModel
@{
    ViewData["Title"] = Model.BlogPost.Title;
    Layout = "~/Views/Shared/_PublicLayout.cshtml";
}

@section Headers {
    <script src="~/skin/menhu/js/hc-sticky.js"></script>
    <script src="~/skin/menhu/js/aside-sticky.js"></script>
    <script src="~/skin/menhu/js/side-tab.js"></script>
    <link href="~/skin/menhu/css/picswiper.min.css" rel="stylesheet">
    <script src="~/skin/menhu/js/picswiper.min.js"></script>
    <script src="~/skin/menhu/js/picview.js"></script>

    <!--重置浏览器样式-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.css">
    <!--代码块主题-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.27.0/themes/prism-coy.min.css">
    <!--工具栏插件-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.27.0/plugins/toolbar/prism-toolbar.min.css">
    <!--行号插件-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.27.0/plugins/line-numbers/prism-line-numbers.min.css">
    <!--Blog post-->
    <link rel="stylesheet" href="~/css/blogpost.css"/>

}

<article>
    <div class="left-box">
        <div class="whitebg">
            <div class="news-title">
                <span class="weizhi">您现在的位置是：<a href="/">首页</a>&nbsp;>&nbsp;<a href="../case.html">设计案例</a>&nbsp;>&nbsp;<a href="personal.html">个人网站</a></span>
                <h2>个人网站</h2>
            </div>
            <div class="picview-box">
                <h1 class="news-title-h1">@Model.BlogPost.Title</h1>
                <div class="keywords"></div>
                <div class="picview-other">
                    <span class="po-date">@Model.BlogPost.CreateDate?.ToString("yyyy-MM-dd HH:mm:ss")</span><span class="po-classname">个人网站</span>
                    <span class="po-view">
                        <script src="../../e/public/ViewClick/ViewClick_64.html"></script>
                    </span>
                </div>

                <div id="nice">
                    @Html.Raw(MarkdownHelper.Render(Model.BlogPost.Content))
                </div>

                <div class="diggit">
                    <a href="JavaScript:makeRequest('/e/public/digg/?classid=7&id=63&dotop=1&doajax=1&ajaxarea=diggnum','EchoReturnedText','GET','');"> 很赞哦！ </a>(
                    <b id="diggnum">
                        <script type="text/javascript" src="../../e/public/ViewClick/ViewClick_65.html"></script>
                    </b>)
                </div>
                <div class="clear"></div>
                <div class="share" id="down">
                    <img src="https://img1.dotnet9.com/site/wechatpublic.jpg">
                    <div class="share-text">
                        <p>扫码关注Dotnet9微信公众号，第一时间获取网站更新动态</p>
                        @switch (Model.BlogPost.CopyrightType)
                        {
                            case CopyrightType.Reprint:
                                <p>本文来自转载，如若二次转载请联系原作者。</p>
                                break;
                            case CopyrightType.Contribution:
                                <p>本文来自网友投稿，如若转载请联系原作者。</p>
                                break;
                            default:
                                <p>本文由本站(<a href="https://dotnet9.com">https://dotnet9.com</a>)整理或创作，如若转载请保留原文标题及原文链接</p>
                                break;
                        }
                        <p>原文作者：<a style="color: #262626;" href="/user/@(Model.BlogPost.Original ?? "沙漠尽头的狼")">@(Model.BlogPost.Original ?? "沙漠尽头的狼")</a></p>
                        @if (Model.BlogPost.CopyrightType == CopyrightType.Default)
                        {
                            <p>原文标题：<a href="/@Model.BlogPost.CreateDate?.ToString("yyyy/MM")/@Model.BlogPost.Slug">@Model.BlogPost.Title</a></p>
                            <p>原文链接：<a href="/@Model.BlogPost.CreateDate?.ToString("yyyy/MM")/@Model.BlogPost.Slug">https://dotnet9.com/@($"{Model.BlogPost.CreateDate ?? DateTime.Now:yyyy/MM}/{Model.BlogPost.Slug}")</a></p>
                        }
                        else
                        {
                            <p>原文标题：<a href="@Model.BlogPost.OriginalLink">@(Model.BlogPost.OriginalTitle ?? Model.BlogPost.Title)</a></p>
                            <p>原文链接：<a href="@Model.BlogPost.OriginalLink">@Model.BlogPost.OriginalLink</a></p>
                        }
                    </div>
                </div>
                <div class="clear"></div>
                <div class="info-pre-next">
                    <ul>
                        <li>
                            @if (Model.PreviewBlogPost != null)
                            {
                                <a href="/@Model.PreviewBlogPost?.CreateDate?.ToString("yyyy/MM")/@Model.PreviewBlogPost?.Slug">
                                    <i>
                                        <em>上一篇</em><img src="@Model.PreviewBlogPost?.Cover" alt="Model.PreviewBlogPost?.Title">
                                    </i>
                                    <h2>@Model.PreviewBlogPost?.Title</h2>
                                    <p>@Model.PreviewBlogPost?.BriefDescription</p>
                                </a>
                            }
                        </li>
                        <li>
                            @if (Model.NextBlogPost != null)
                            {
                                <a href="/@Model.NextBlogPost?.CreateDate?.ToString("yyyy/MM")/@Model.NextBlogPost?.Slug">
                                    <i>
                                        <em>下一篇</em><img src="@Model.NextBlogPost?.Cover" alt="Model.NextBlogPost?.Title">
                                    </i>
                                    <h2>@Model.NextBlogPost?.Title</h2>
                                    <p>@Model.NextBlogPost?.BriefDescription</p>
                                </a>
                            }
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="clear blank"></div>
        <div class="otherlink whitebg">
            <div class="news-title">
                <h2>相关文章</h2>
            </div>
            <ul>
                @if (Model.SameCategoryBlogPosts != null && Model.SameCategoryBlogPosts.Any())
                {
                    @foreach (var item in Model.SameCategoryBlogPosts)
                    {
                        <li>
                            <a href="/@item.CreateDate?.ToString("yyyy/MM")/@item.Slug" title="@item.Title">@item.Title</a>
                        </li>
                    }
                }
            </ul>
        </div>
        <div class="pinglun-box whitebg">
            <div class="news-title">
                <h2>文章评论</h2>
            </div>
            <!-- 评论 开始 -->
            <div class="pinglun">
                <div class="pl-520am" data-id="63" data-classid="7" data-showhot="0"></div>
                <script type="text/javascript" src="~/skin/e/extend/lgyPl/api.js"></script>
            </div>
            <!-- 评论 结束 -->
        </div>
    </div>
    <aside class="side-section right-box">
        <div class="side-tab">
            <ul id="sidetab">
                <li class="sidetab-current">站长推荐</li>
                <li>点击排行</li>
            </ul>
            <div id="sidetab-content">
                <section>
                    @await Component.InvokeAsync("RecommendSidebar")
                </section>
                <section>
                    @await Component.InvokeAsync("LatestBlogPosts")
                </section>
            </div>
        </div>
        @await Component.InvokeAsync("TagCloud")
        <div class="clear blank"></div>
        @await Component.InvokeAsync("RandomBlogPosts")
    </aside>
</article>

@section Scripts {

    <!--prism核心js (用于渲染代码块)-->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.27.0/prism.min.js"></script>
    <!--显示代码块行号-->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.27.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <!--工具栏(一些插件的前置依赖)-->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.27.0/plugins/toolbar/prism-toolbar.min.js"></script>
    <!--代码块显示语言名称-->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.27.0/plugins/show-language/prism-show-language.min.js"></script>
    <!--复制代码-->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.27.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
    <!--自动去cdn加载对应语言的代码高亮js-->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.27.0/plugins/autoloader/prism-autoloader.min.js"></script>
}