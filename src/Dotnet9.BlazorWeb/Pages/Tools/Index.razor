@page "/tools"
@inject ISystemClientService SystemClientService

<PageTitle>工具箱</PageTitle>

@if (_items is not {Count: > 0 })
{
    <div class="read_more">
        这里空空如也
    </div>
}
else
{
    <div class="blog_list">
        <ul>
            @foreach (var toolItem in _items)
            {
                <li>
                    <a href="@toolItem.Url" class="blog_more">
                        <h2>@toolItem.Name</h2>
                        <i>
                            <img src="@toolItem.Cover" alt="@toolItem.Name" title="@toolItem.Name"/>
                        </i>
                        <p title="@toolItem.Description">@toolItem.Description</p>
                    </a>
                    <div class="info">
                        <span class="info_view">@toolItem.ViewCount</span>
                    </div>
                </li>
            }
        </ul>
    </div>
}

@code
{
    List<ToolItem>? _items;

    protected override async Task OnInitializedAsync()
    {
        var siteInfo = await SystemClientService.GetSiteInfoAsync();
        _items = new List<ToolItem>()
        {
            new("在线字符串编码工具", $"{siteInfo?.AssetsRemotePath}/tools/stringencode.png", "使用System.Web.HttpUtility.UrlDecode方法对编码结果进行URL解码，System.Web.HttpUtility.UrlEncode方法对输入字符串进行URL编码", "/tools/string-encoder", 0),
            new("时间戳", $"{siteInfo?.AssetsRemotePath}/tools/timestamp.png", "时间与时间戳相互转换", "/tools/timestamp", 0)
        };
    }
}