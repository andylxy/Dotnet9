@page "/timelines"
@using Dotnet9.Tools.Web.Shared.Public
@using Dotnet9.Tools.Web.Utils
@using Newtonsoft.Json
@using Dotnet9.Tools.Web.Models
@layout DocLayout

<PageTitle>时间轴 - D9工具箱</PageTitle>

<h1 class="entry-title">时间轴</h1>

<MTimeline>
    @if (Items != null)
    {
        @foreach (var item in Items)
        {
            var color = $"{ConstData.RandomColor}";
            <MTimelineItem Color="@color" Icon="@ConstData.RandomIcon" Large>
                <OppositeContent>
                    <span class="@($"headline font-weight-bold {color}--text")">@item.Time</span>
                </OppositeContent>
                <ChildContent>
                    <MCard Color="@color" Dark>
                        <p Class="pt-3 pl-4">@item.Title</p>
                        <MCardText Class="white text--primary">@item.Content</MCardText>
                    </MCard>
                </ChildContent>
            </MTimelineItem>
        }
    }
</MTimeline>

@code
{

    private static List<Timeline>? _items;

    private static List<Timeline>? Items
    {
        get
        {
            if (_items != null)
            {
                return _items;
            }
            _items = JsonConvert.DeserializeObject<List<Timeline>>(File.ReadAllText(SitePathHelper.TimelinePath));
            return _items;
        }
    }

    struct Timeline
    {
        public string? Time { get; set; }

        public string? Title { get; set; }

        public string? Content { get; set; }
    }
}