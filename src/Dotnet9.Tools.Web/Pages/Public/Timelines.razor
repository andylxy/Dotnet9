@page "/timelines"
@using Dotnet9.Tools.Web.Shared.Public
@using Newtonsoft.Json
@using Dotnet9.Tools.Web.Models
@layout DocLayout

<PageTitle>@T("Timelines") - @T("Dotnet9ToolsTitle")</PageTitle>

<h1 class="entry-title">@T("Timelines")</h1>

<MTimeline>
    @if (Items != null)
    {
        @foreach (var item in Items)
        {
            var color = $"{ConstData.RandomColor}";
            <MTimelineItem Color="@color" Icon="@ConstData.RandomIcon" Large>
                <OppositeContent>
                    <span class="@($"headline font-weight-bold {color}--text")">@item.Time</span>
                </OppositeContent>
                <ChildContent>
                    <MCard Color="@color" Dark>
                        <p Class="pt-3 pl-4">@item.Title</p>
                        <MCardText Class="white text--primary">@item.Content</MCardText>
                    </MCard>
                </ChildContent>
            </MTimelineItem>
        }
    }
</MTimeline>

@code
{
    [CascadingParameter]
    public PublicLayout MainLayout { get; set; } = default!;

    private static List<Timeline>? _items;

    private static List<Timeline>? Items
    {
        get
        {
            if (_items != null)
            {
                return _items;
            }
            _items = JsonConvert.DeserializeObject<List<Timeline>>(File.ReadAllText(Path.Combine("wwwroot", "doc", "timelines.json")));
            return _items;
        }
    }

    public string? T(string key)
    {
        return MainLayout.T(key);
    }

    struct Timeline
    {
        public string? Time { get; set; }

        public string? Title { get; set; }

        public string? Content { get; set; }
    }
}